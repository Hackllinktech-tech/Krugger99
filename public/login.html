<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HACKLINK TECH â€” Login</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
  :root{--accent:#ff00aa;--accent2:#9900ff}
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:'Poppins',sans-serif;
    background:radial-gradient(circle at top,#0d0d0d,#1a1a1a);
    color:#fff;
  }
  body::before{
    content:'';
    position:fixed; inset:-50%;
    background:conic-gradient(var(--accent),var(--accent2),#00ffee,var(--accent));
    filter:blur(200px);
    z-index:0;
    animation:spin 14s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}

  .login-box{
    position:relative;
    z-index:1;
    width:360px;
    max-width:92vw;
    padding:1.85rem;
    border-radius:14px;
    background:rgba(20,20,20,0.9);
    box-shadow:0 8px 40px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.03);
  }
  h1{margin:0 0 1rem;font-size:1.4rem;text-align:center;text-shadow:0 0 8px var(--accent)}

  .form-group{position:relative;margin-bottom:1rem}
  label{display:block;color:#cfcfcf;font-size:0.9rem;margin-bottom:6px}

  input[type="text"],
  input[type="password"]{
    width:100%;
    padding:0.7rem 2.6rem 0.7rem 0.8rem;
    border-radius:8px;
    border:none;
    background:rgba(255,255,255,0.06);
    color:#fff;
    font-size:1rem;
    outline:none;
    transition:box-shadow .15s;
  }
  input:focus{box-shadow:0 0 12px rgba(255,0,170,0.18); background:rgba(255,255,255,0.08)}

  .password-toggle{
    position:absolute;
    right:6px;
    top:50%;
    transform:translateY(-50%);
    height:30px;
    width:30px;
    border:none;
    background:transparent;
    color:var(--accent);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index:3;
    padding:0;
  }
  button[type="submit"]{
    width:100%;
    margin-top:6px;
    padding:0.8rem;
    border-radius:8px;
    border:none;
    font-weight:700;
    color:#fff;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    cursor:pointer;
  }
  button[type="submit"]:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,0,170,0.15)}

  .meta{margin-top:12px;text-align:center;color:#cfcfcf;font-size:0.95rem}
  .meta a{color:var(--accent);text-decoration:none}
</style>
</head>
<body>

<div class="login-box" role="main" aria-labelledby="loginTitle">
  <h1 id="loginTitle">HACKLINK TECH Login</h1>

  <form id="loginForm" autocomplete="on">
    <div class="form-group">
      <label for="username">Username</label>
      <input id="username" name="username" type="text" maxlength="30" required />
    </div>

    <div class="form-group" style="margin-bottom:0.6rem;">
      <label for="password">Password</label>
      <input id="password" name="password" type="password" maxlength="255" required />
      <button type="button" class="password-toggle" id="pwToggle" aria-label="Show password">
        <i class="fas fa-eye" id="pwIcon"></i>
      </button>
    </div>

    <button type="submit">Login</button>
  </form>

  <div class="meta">Don't have an account? <a href="signup.html">Sign Up</a></div>
</div>

<script>
  // Password toggle
  const pw = document.getElementById('password');
  const pwToggle = document.getElementById('pwToggle');
  const pwIcon = document.getElementById('pwIcon');

  pwToggle.addEventListener('click', () => {
    const isPassword = pw.type === 'password';
    const caret = pw.selectionStart;
    pw.type = isPassword ? 'text' : 'password';
    pwIcon.classList.toggle('fa-eye');
    pwIcon.classList.toggle('fa-eye-slash');
    pw.focus();
    try { pw.setSelectionRange(caret, caret); } catch(e) {}
  });

  // Login submission
  document.getElementById('loginForm').addEventListener('submit', async (evt) => {
    evt.preventDefault();
    const data = {
      username: document.getElementById('username').value.trim(),
      password: document.getElementById('password').value
    };
    try {
      const res = await fetch('/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      if (result.success) {
        window.location.href = 'dashboard.html';
      } else {
        alert(result.error || 'Login failed');
      }
    } catch (err) {
      console.error(err);
      alert('Server error. Please try again.');
    }
  });
</script>

</body>
</html>
